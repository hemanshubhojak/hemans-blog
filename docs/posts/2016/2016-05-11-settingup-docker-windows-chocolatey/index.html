<!DOCTYPE html>
<html>

<head>
    
    

    <title>heman's blog</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600&family=Roboto+Mono:wght@300;400;600"
        rel="stylesheet" />
    <link rel="stylesheet" href="https://hemans.blog/syntax.a832bd16b1d6afac69b94ca616a61d04b6ac9ffe41dd90333d406c1ebed2eddc.css" integrity="sha256-qDK9FrHWr6xpuUymFqYdBLasn/5B3ZAzPUBsHr7S7dw="
        media="screen">
    <link rel="stylesheet" href="https://hemans.blog/main.min.71aa65299931f19f62c8f84bcd6e1d1816d76d812742550ee1f608dc2cc30e42.css" integrity="sha256-caplKZkx8Z9iyPhLzW4dGBbXbYEnQlUO4fYI3CzDDkI=" media="screen">
</head>

<body>

    <div class="container">
        
<header class="site-header">
    <h2>
        <a href="https://hemans.blog/">heman's blog</a>
    </h2>
</header>


        <main>
            
<article>
    <header>
        <h1>
            Setting up Docker on Windows using Chocolatey
        </h1>
        <small>
            May 11, 2016 &middot; 3 minute read
        </small>
    </header>
    <div>
        <h3 id="installing-chocolatey">Installing Chocolatey</h3><p><a href="https://chocolatey.org/">Chocolatey</a> is an <a href="/2016/05/11/chocolatey-a-package-manager-for-windows.html">awesome package manager for Windows</a> (like apt-get) which makes installing software a breeze.</p>
<p>Run the following command to download and install Chocolatey.</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">C:\&gt;  @powershell -NoProfile -ExecutionPolicy Bypass -Command &#34;iex ((new-object net.webclient).DownloadString(&#39;https://chocolatey.org/install.ps1&#39;))&#34; &amp;&amp; SET PATH=%PATH%;%ALLUSERSPROFILE%\chocolatey\bin
</code></pre></div><p>Verify that we have successfully installed Chocolatey.</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">C:\&gt; choco -v
</code></pre></div><h3 id="installing-docker-components">Installing Docker Components</h3><p>We will need the following components in order to create and host <a href="https://www.docker.com/">Docker</a> containers on our local machine.</p>
<ol>
<li>VirtualBox</li>
<li>Docker Client</li>
<li>Docker Machine</li>
<li>Docker Compose</li>
</ol>
<h4 id="virtual-box">Virtual Box</h4><p>Docker uses virtual machines to host and run containers. It supports VirtualBox, VMWare, Hyper-V along with some other cloud based virtualization products.</p>
<p>For this exercise we will use VirtualBox. Run the following command to install VirtualBox.</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">C:\&gt; choco install virtualbox
</code></pre></div><h4 id="docker-client">Docker Client</h4><p>Docker client is used to manage images and containers. It is used to build images and run containers.</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">C:\&gt; choco install docker
</code></pre></div><p>Verify</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">C:\&gt; docker -v
Docker version 1.11.1, build 5604cbe
</code></pre></div><h4 id="docker-machine">Docker Machine</h4><p>Containers are run within virtual machines. Docker machine is used to create and manage virtual machines.</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">C:\&gt; choco install docker-machine
</code></pre></div><p>Verify</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">C:\&gt; docker-machine -v
docker-machine version 0.7.0, build a650a40
</code></pre></div><h4 id="docker-compose">Docker Compose</h4><p>Docker compose is mainly used to compose and run multiple docker containers. This is useful when we have separate containers to run the application, database, etc.</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">C:\&gt; choco install docker-compose
</code></pre></div><p>Verify</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">C:\&gt; docker-compose -v 
docker-compose version 1.7.1, build unknown
</code></pre></div><h3 id="finally-our-first-docker-container-">Finally, our first docker container :)</h3><p>Now that we have all the required components in place, let us create and run our first container.</p>
<p>Use the following command to create a docker virtual machine with the name <code>mydockervm</code>.</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">C:\&gt; docker-machine create -d virtualbox mydockervm
</code></pre></div><p>It will take a while for the virtual machine to be ready. After this command completes, run the following to check the status of the virtual machine.</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">C:\&gt; docker-machine ls
NAME         ACTIVE   DRIVER       STATE     URL                         SWARM   DOCKER    ERRORS
mydockervm   *        virtualbox   Running   tcp://192.168.99.100:2376           v1.11.1   
</code></pre></div><p>We can have multiple docker virtual machines running on the same physical machine.</p>
<p>Before we can create our container, we will have to setup some environment variables to tell docker client about our virtual machine.</p>
<p>Docker supports <code>bash</code>, <code>cmd</code>, <code>powershell</code> and <code>emacs</code> at the time of writing this post. Since we are on Windows we will use <code>powershell</code>.</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">C:\&gt; docker-machine env --shell powershell mydockervm | iex
</code></pre></div><p>Finally let us create and run our first docker container.</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">C:\&gt; docker run --rm -it ubuntu bash
</code></pre></div><p>You should see a bash prompt once the container has started. Type <code>exit</code> to stop the container.</p>
<p>The <code>--rm</code> options tells docker to delete the file system after the container stops.</p>
<p><code>-it</code> along with <code>bash</code> in layman terms runs the container in interactive mode where we can use the container&rsquo;s bash.</p>

    </div>
</article>

<aside>
    <nav>
        <ul>
            
            <li>
                <a href="https://hemans.blog/posts/2016/2016-05-11-chocolatey-a-package-manager-for-windows/">&#8592; Chocolatey: A package manager for Windows</a>
            </li>
            
            
            <li>
                <a href="https://hemans.blog/posts/2016/2016-05-12-simple-docker-container-running-http-server/">Simple Docker container running a http server &#8594;</a>
            </li>
            
        </ul>
    </nav>
</aside>


        </main>

        
            <div class="profile">
    <img src="/images/profile-picture.jpg"/>
    <p>
        Personal blog of <strong>Hemanshu Bhojak</strong> aka <strong>heman</strong>.
        I write what I learn.
    </p>
</div>
        
    </div>

</body>

</html>